/**
 * lc_micro_slider.js - lightweight responsive slider with jquery.touchSwipe.js (or AlloyFinger) integration
 * Version: 1.2.1
 * Author: Luca Montanari aka LCweb
 * Website: http://www.lcweb.it
 * Licensed under the MIT license
 */

(function(d){var p=function(n,c){var e=d.extend({slide_fx:"fadeslide",nav_arrows:!0,nav_dots:!0,slideshow_cmd:!0,carousel:!0,touchswipe:!0,autoplay:!1,animation_time:700,slideshow_time:5E3,pause_on_hover:!0,loader_code:'<span class="lcms_loader"></span>'},c),l=d(n);l.data("lcms_vars",{slides:[],shown_slide:0,cached_img:[],is_sliding:!1,is_playing:!1,paused_on_hover:!1});l.data("lcms_settings",e);var q=function(b,g,f){var m=b.data("lcms_vars"),c=b.data("lcms_settings"),h=m.slides[f],k=h.img?"lcms_preload":
"";c=h.img?c.loader_code:"";switch(g){case "init":var e="lcms_active_slide";break;case "fade":e="lcms_fadein";break;case "prev":e="lcms_before";break;case "next":e="lcms_after"}b.find(".lcms_nav_dots span").removeClass("lcms_sel_dot");b.find(".lcms_nav_dots span").eq(f).addClass("lcms_sel_dot");g=h.img?'<div class="lcms_bg" style="background-image: url('+h.img+');"></div>':"";var l=d.trim(h.content)?'<div class="lcms_content">'+h.content+"</div>":"";k='<div class="lcms_slide '+e+" "+k+'" rel="'+f+
'"><div class="lcms_inner '+h.classes+'">'+g+l+"</div>"+c+"</div>";b.find(".lcms_container").append(k);h.img&&(-1===d.inArray(h.img,m.cached_img)?d("<img/>").bind("load",function(){m.cached_img.push(this.src);d(".lcms_slide[rel="+f+"]").removeClass("lcms_preload");d(".lcms_slide[rel="+f+"]").find("> *").not(".lcms_inner").fadeOut(300,function(){d(this).remove()});b.trigger("lcms_slide_shown",[f,h]);d(".lcms_slide[rel="+f+"]").hasClass("lcms_active_slide")&&b.trigger("lcms_initial_slide_shown",[f,
h])}).attr("src",h.img):(d(".lcms_slide[rel="+f+"]").removeClass("lcms_preload").addClass("lcms_cached"),d(".lcms_slide[rel="+f+"]").find("> *").not(".lcms_inner").remove(),b.trigger("lcms_slide_shown",[f,h])));1<m.slides.length&&(k=f<m.slides.length-1?f+1:0,-1===d.inArray(m.slides[k].img,m.cached_img)&&d("<img/>").bind("load",function(){m.cached_img.push(this.src)}).attr("src",m.slides[k].img));2<m.slides.length&&(k=f?f-1:m.slides.length-1,-1===d.inArray(m.slides[k].img,m.cached_img)&&d("<img/>").bind("load",
function(){m.cached_img.push(this.src)}).attr("src",m.slides[k].img))};lcms_slide=function(b,g){var f=b.data("lcms_vars"),c=b.data("lcms_settings"),e=c.animation_time,h=f.shown_slide;if(!c.carousel&&("prev"==g&&!f.shown_slide||"next"==g&&f.shown_slide==f.slides.length-1)||f.lcms_is_sliding||1==f.slides.length||"number"==typeof g&&(0>g||g>f.slides.length-1))return!1;f.lcms_is_sliding=!0;if("prev"==g)var k=0===h?f.slides.length-1:h-1;else"next"==g?k=h==f.slides.length-1?0:h+1:(k=g,g=k>h?"next":"prev");
b.find(".lcms_active_slide").addClass("lcms_prepare_for_"+g);q(b,"fade"==c.slide_fx?"fade":g,k);f.shown_slide=k;b.trigger("lcms_changing_slide",[k,f.slides[k],h]);"fade"==c.slide_fx?b.find(".lcms_active_slide").fadeOut(e):"slide"==c.slide_fx?"prev"==g?(b.find(".lcms_before").css("left","-100%").animate({left:"0%"},e),b.find(".lcms_active_slide").animate({left:"100%"},e)):(b.find(".lcms_after").css("left","100%").animate({left:"0%"},e),b.find(".lcms_active_slide").animate({left:"-100%"},e)):"fadeslide"==
c.slide_fx?"prev"==g?(b.find(".lcms_before").fadeTo(0,0).animate({left:"0%",opacity:1},e),b.find(".lcms_active_slide").animate({left:"100%",opacity:0},e)):(b.find(".lcms_after").fadeTo(0,0).animate({left:"0%",opacity:1},e),b.find(".lcms_active_slide").animate({left:"-100%",opacity:0},e)):"zoom-in"==c.slide_fx?b.find(".lcms_before, .lcms_after").fadeTo(0,0).animate({opacity:1},{step:function(b,c){var g=.5+b/2;d(this).css("-ms-transform","scale("+g+")").css("-webkit-transform","scale("+g+")").css("transform",
"scale("+g+")")},duration:e}):"zoom-out"==c.slide_fx&&b.find(".lcms_before, .lcms_after").fadeTo(0,0).animate({opacity:1},{step:function(b,g){var c=1.5-b/2;d(this).css("-ms-transform","scale("+c+")").css("-webkit-transform","scale("+c+")").css("transform","scale("+c+")")},duration:e});setTimeout(function(){b.find(".lcms_active_slide").remove();b.find(".lcms_slide").removeClass("lcms_fadein lcms_before lcms_after").addClass("lcms_active_slide");f.lcms_is_sliding=!1;b.trigger("lcms_new_active_slide",
[k,f.slides[k]])},e)};d(".lcms_prev").unbind("click");l.delegate(".lcms_play","click",function(){var b=d(this).parents(".lcms_wrap").parent();jQuery(this).hasClass("lcms_pause")?b.lcms_stop_slideshow():b.lcms_start_slideshow()});d(".lcms_prev").unbind("click");l.delegate(".lcms_prev:not(.lcms_disabled)","click",function(){var b=d(this).parents(".lcms_wrap").parent();"undefined"!=typeof lcms_one_click&&clearTimeout(lcms_one_click);lcms_one_click=setTimeout(function(){b.lcms_stop_slideshow();lcms_slide(b,
"prev")},5)});d(".lcms_next").unbind("click");l.delegate(".lcms_next:not(.lcms_disabled)","click",function(){var b=d(this).parents(".lcms_wrap").parent();"undefined"!=typeof lcms_one_click&&clearTimeout(lcms_one_click);lcms_one_click=setTimeout(function(){b.lcms_stop_slideshow();lcms_slide(b,"next")},5)});d(".lcms_next").unbind("click");l.delegate(".lcms_nav_dots span:not(.lcms_sel_dot)","click",function(){var b=d(this).parents(".lcms_wrap").parent(),c=parseInt(jQuery(this).attr("rel"));"undefined"!=
typeof lcms_one_click&&clearTimeout(lcms_one_click);lcms_one_click=setTimeout(function(){b.lcms_stop_slideshow();lcms_slide(b,c)},5)});var p=function(){"function"==typeof d.fn.swipe?l.find(".lcms_wrap").swipe({swipeRight:function(){var b=jQuery(this).parent();b.lcms_stop_slideshow();lcms_slide(b,"prev")},swipeLeft:function(){var b=jQuery(this).parent();b.lcms_stop_slideshow();lcms_slide(b,"next")},threshold:40,allowPageScroll:"vertical"}):"function"==typeof AlloyFinger&&new AlloyFinger(l.find(".lcms_wrap")[0],
{swipe:function(b){var d=jQuery(this).parent();d.lcms_stop_slideshow();"Right"===b.direction?lcms_slide(d,"prev"):"Left"===b.direction&&lcms_slide(d,"next")}})};e.pause_on_hover&&l.delegate(".lcms_wrap","mouseenter",function(){var b=d(this).parent(),c=b.data("lcms_vars");b.data("lcms_settings");c.is_playing&&(b.lcms_stop_slideshow(),c.paused_on_hover=!0)}).delegate(".lcms_wrap","mouseleave",function(){var b=d(this).parent(),c=b.data("lcms_vars");b.data("lcms_settings");c.paused_on_hover&&(b.lcms_start_slideshow(),
c.paused_on_hover=!1)});(function(b){var c=b.data("lcms_vars"),f=b.data("lcms_settings");b.find("li").each(function(b,e){d(this).find("noscript").remove();var f={content:d(this).html(),img:d(this).attr("lcms_img"),classes:"undefined"==typeof d(this).attr("class")?"":d(this).attr("class")};c.slides.push(f)});b.html('<div class="lcms_wrap"><div class="lcms_container"></div></div>');c.shown_slide=0;q(b,"init",0);f.nav_arrows&&1<c.slides.length&&b.find(".lcms_wrap").addClass("lcms_has_nav_arr").prepend('<div class="lcms_nav"><span class="lcms_prev"></span><span class="lcms_next"></span></div>');
if(f.nav_dots&&1<c.slides.length){var e='<div class="lcms_nav_dots">';for(a=0;a<c.slides.length;a++)e+='<span rel="'+a+'"></span>';b.find(".lcms_wrap").addClass("lcms_has_nav_dots").prepend(e+"</div>");b.find(".lcms_nav_dots span").first().addClass("lcms_sel_dot")}f.slideshow_cmd&&1<c.slides.length&&b.find(".lcms_wrap").addClass("lcms_has_ss_cmd").prepend('<div class="lcms_play"><span></span></div>');f.autoplay&&b.lcms_start_slideshow();b.trigger("lcms_ready");d(document).ready(function(b){"function"!=
typeof d.fn.swipe&&"function"!=typeof AlloyFinger||p()})})(l);return this};d.fn.lc_micro_slider=function(n){d.fn.lcms_destroy=function(){var c=d(this);c.find(".lcms_wrap").remove();var e=c.data("lcms_vars");e.is_playing&&clearInterval(e.is_playing);c.find(".lcms_next, .lcms_prev").undelegate("click");c.removeData("lcms_vars");c.removeData("lcms_settings");c.removeData("lc_micro_slider");return!0};d.fn.lcms_paginate=function(c){var e=d(this);e.data("lcms_vars");e.data("lcms_settings");e.lcms_stop_slideshow();
lcms_slide(e,c);return!0};d.fn.lcms_start_slideshow=function(){var c=d(this),e=c.data("lcms_vars"),l=c.data("lcms_settings");e.is_playing=setInterval(function(){lcms_slide(c,"next")},l.slideshow_time+l.animation_time);c.find(".lcms_play").addClass("lcms_pause");c.trigger("lcms_play_slideshow");return!0};d.fn.lcms_stop_slideshow=function(){var c=d(this),e=c.data("lcms_vars");c.data("lcms_settings");clearInterval(e.is_playing);e.is_playing=null;c.find(".lcms_play").removeClass("lcms_pause");c.trigger("lcms_stop_slideshow");
return!0};return this.each(function(){if(d(this).data("lc_micro_slider"))return d(this).data("lc_micro_slider");var c=new p(this,n);d(this).data("lc_micro_slider",c)})}})(jQuery);